<!DOCTYPE html>
<html lang="zh_CN">
<head>
    <#include "/layout/meta.html" />
    <title>修改密码</title>
</head>
<body>


<#include "layout/navbar.html" />


<div class="container">
    <div class="row">
        <div class="col-md-offset-3 col-md-6">


            <div class="panel panel-default">
                <div class="panel-body">

                    <form role="form" class="form-horizontal" action="${request.contextPath}/users/password/modify"
                          method="post"
                          accept-charset="utf-8">
                        <!-- 管理员修改密码和本人修改密码展示方式不同 -->
                        <!-- 管理员不需要老密码即可修改,本人修改需要输入老密码 -->

                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="userId">账号</label>
                            <div class="col-sm-10">
                                <#if upsUser.type == 1>
                                    <select class="select-user-basic-ajax" id="userId" name="userId"
                                            style="width:100%;">
                                        <option value="3620194" selected="selected">select2/select2</option>
                                    </select>
                                    <#else>
                                        <span style="padding-top: 5px;display: inline-block;">${upsUser.nickname}</span>
                                        <input type="hidden" name="userId" value="${upsUser.id}"/>
                                </#if>
                            </div>
                        </div>

                        <#if upsUser.type != 1>
                            <div class="form-group">
                                <label class="col-sm-2 control-label" for="password">老密码</label>
                                <div class="col-sm-10">
                                    <input type="password" class="form-control" id="password" name="password"
                                           placeholder="请输入老密码">
                                </div>
                            </div>
                        </#if>

                        <div class="form-group">
                            <label class="col-sm-2 control-label" for="newPassword">新密码</label>
                            <div class="col-sm-10">
                                <input type="password" class="form-control" id="newPassword" name="newPassword"
                                       placeholder="请输入新密码">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-10">
                                <button type="submit" class="btn btn-default">修改密码</button>
                            </div>
                        </div>
                    </form>

                </div>
            </div>
        </div>
    </div>
</div>

<#include "/layout/footer.html" />
<script>
    $(function () {
        /** 加载用户列表 **/
        $(".select-user-basic-ajax").select2({
            ajax: {
                url: "${request.contextPath}/users/finder",
                dataType: "json",
                delay: 250,
                cache: true,
                processResults: function (data) {
                    return {
                        results: data
                    }
                }
            }
        });
    });
</script>
</body>
</html>